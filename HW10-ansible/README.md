 ### Homework 10. Ansible

 Подготовить стенд на Vagrant как минимум с одним сервером. На этом сервере используя Ansible необходимо развернуть nginx со следующими условиями:
- необходимо использовать модуль yum/apt
- конфигурационные файлы должны быть взяты из шаблона jinja2 с перемененными
- после установки nginx должен быть в режиме enabled в systemd
- должен быть использован notify для старта nginx после установки
- сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в Ansible


### Что сделано:

* vagrantfile запускает ВМ hwserver с Centos/7, IP 10.10.10.10

* ansible стоит на хостовой машине (ubuntu18), управляем ВМ на centos

* создан inventory файл, группа хостов - otus, имя- hwserver 

* создан  ansible.cfg, в котором указан путь к inventory.ini, путь к ssh ключам и пр. 
* vagrant генерирует ssh ключ в ./.vagrant/machines/<vm_name>/virtualbox/private_key

* в vagrantfile прописан провижинер ansible, который запускает плейбук nginx_start.yml

* в плейбуке прописаны задачи (таски) : repo_update (добавления репозитория epel_release, с помощью модуля yum); nginx_install (модуль yum). Последний вызывает хендлер nginx_restart

* таск nginx_config загружает на ВМ шаблон ./templates/nginx.conf.j2 c переменной nginx_listen_port, прописанной в начале плейбука (раздел vars), и вызывает хендлер nginx_reload.

* хендлеры - задания, не выполняющиеся в обычных условиях, а только при вызыве через notify.

* nginx_restart и nginx_reload используют модуль systemd, первый перезагружает сервис и ставит ему статус на автозапуск, второй перезагружает конфиг файл. 

* после запуска vagrant up на ВМ поднимается nginx на порту 8080, можно проверить через бразуер или curl

```
curl 127.0.0.1:8080
```