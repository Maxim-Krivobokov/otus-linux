Домашнее задание
1. Попасть в систему без пароля несколькими способами
2. Установить систему с LVM, после чего переименовать VG
3. Добавить модуль в initrd
4. (*) Сконфигурировать систему без отдельного раздела с /boot, а
только с LVM


1. через GUI. во время щагрузки жмем Е, попадает в параметры  
Несколько вариантов действия:
* в строке linux16 добавляем init=/bin/sh, для продолжения Ctrl-X
    * результат - (после отображения своего модуля с пингвином) - Kernel Panic
````
Kernel panic - not syncing: Attempted to kill init! exitcode=0x00000000
````

* в строке linux16 добавляем rd.break, для продолжения Ctrl-X. будет загрузка в Emergency mode
    * результат - система загружается в обычном режиме, запрашивает пароль

* в строке linux16 изменяем ro на rw init=/sysroot/bin/sh, для продолжения Ctrl-X
     * результат - загрузка зависает на пингвине. проверил на другой ВМ. Зависла намного раньше
```
random: crng init done
```



2. 
* после входа в систему смотрим список виртуальных групп VG

* переименовываем группу
```
vgs

vgrename VolGroup00 OtusRoot
```

* нужно изменить файлы /etc/fstab /etc/default/grub /boot/grub2/grub.cfg. В них заменить  имя VolGroup00 на OtusRoot

* пересоздать образ initrd, чтобы он знал новое имя Volume group
```
mkinitrd -f -v /boot/initramfs-$(uname -r).img $(uname -r)
```

* после перезагрузки (система запустилась - успех!) проверяем командой vgs обновленный volume group

3. Добавление модуля в initrd

* Для добавление своего модуля создадим директорию в /usr/lib/dracut/modules.d/01test
```
mkdir /usr/lib/dracut/modules.d/01test
```
* в нее помещены два скрипта, module-setup.sh и test.sh. Первый устанавливает модуль и вызывает второй скритп. Второй рисует пингвина.  Им присвоены права для исполнения

* пересобрать образ initrd
```
mkinitrd -f -v /boot/initramfs-$(uname -r).img $(uname -r)
# альтернатива:
dracut -f -v
```

* просмотр установленных в образ модулей
```
lsinitrd -m /boot/initramfs-$(uname -r).img | grep test
```

* проверка: либо во время перезагрузки убрать опции rghb и quiet в строке linux16, либо удалить их в /boot/grub2/grub.cfg

* во время перезагрузки в GUI видим пингвина. 